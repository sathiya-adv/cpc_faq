<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPC FAQ Generator - AI-Powered Legal Assistant</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <header>
        <div class="header-content">
            <h1>üèõÔ∏è Civil Procedure Code FAQ Generator</h1>
            <p>AI-Powered Legal Learning Assistant</p>
        </div>
    </header>

    <main class="main-content">
        <section class="hero-section">
            <h2>Get Instant Answers to Your CPC Questions</h2>
            <div class="search-box">
                <input type="text" id="mainSearch" placeholder="Ask about jurisdiction, appeals, limitation, plaint...">
                <button onclick="intelligentSearch()">üîç Search</button>
            </div>
        </section>

        <section class="quick-topics">
            <h3>Quick Topic Access</h3>
            <div class="topic-grid">
                <div class="topic-card" onclick="loadTopic('jurisdiction')">
                    <h4>Jurisdiction</h4>
                    <p>Territorial & Subject Matter Jurisdiction</p>
                </div>
                <div class="topic-card" onclick="loadTopic('pleadings')">
                    <h4>Pleadings</h4>
                    <p>Plaint, Written Statement, Rejoinder</p>
                </div>
                <div class="topic-card" onclick="loadTopic('appeals')">
                    <h4>Appeals & Revision</h4>
                    <p>Appeal Process, Revision, Review</p>
                </div>
                <div class="topic-card" onclick="loadTopic('execution')">
                    <h4>Execution</h4>
                    <p>Decree Execution, Attachment, Sale</p>
                </div>
            </div>
        </section>

        <!-- SUPABASE FAQ DISPLAY -->
        <section id="faq-display" class="faq-section">
            <h3>üìö Stored FAQs (Database)</h3>
            <div id="faq-container"></div>
        </section>

        <section class="ai-generator">
            <h3>AI FAQ Generator</h3>
            <p>Enter a specific CPC topic or scenario to generate relevant questions and answers:</p>
            <textarea id="topicInput" placeholder="Example: 'What happens when a defendant fails to file written statement within 30 days?'"></textarea>
            <button onclick="generateAIFAQ()">Generate AI FAQ</button>
        </section>
    </main>

    <footer>
        <p>¬© 2026 CPC FAQ Generator | Educational Resource</p>
    </footer>

    <!-- Existing Script -->
    <script src="scripts/app.js"></script>

    <!-- SUPABASE SCRIPT -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        const supabaseUrl = "https://iihkigsabrgzfyjmbpen.supabase.co";
        const supabaseKey = "sb_publishable_UsrPyMoH5mhSG9pd5R5ksg_krkLH6OK";

        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        async function loadFAQs() {
            const { data, error } = await supabase
                .from("faqs")
                .select("*");

            if (error) {
                console.error("Error loading FAQs:", error);
                return;
            }

            const container = document.getElementById("faq-container");
            container.innerHTML = "";

            data.forEach(faq => {
                container.innerHTML += `
                    <div class="faq-item">
                        <h4>${faq.question}</h4>
                        <p>${faq.answer}</p>
                    </div>
                `;
            });
        }

        loadFAQs();
    </script>

</body>
</html>
